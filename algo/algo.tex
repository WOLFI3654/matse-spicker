\documentclass[german]{../spicker}

\usepackage{amsmath}

\usepackage{graphicx}
\usepackage{tabularx, multirow}
\usepackage{forest}
\usepackage{color, colortbl}

\usetikzlibrary{tikzmark,calc,arrows.meta,chains,decorations.pathreplacing,scopes,shapes.misc,shapes.multipart}

\definecolor{javared}{rgb}{0.6,0,0} % for strings
\definecolor{javagreen}{rgb}{0.25,0.5,0.35} % comments
\definecolor{javapurple}{rgb}{0.5,0,0.35} % keywords
\definecolor{javadocblue}{rgb}{0.25,0.35,0.75} % javadoc
 
\lstset{language=Java,
basicstyle=\ttfamily,
keywordstyle=\color{javapurple}\bfseries,
stringstyle=\color{javared},
commentstyle=\color{javagreen},
morecomment=[s][\color{javadocblue}]{/**}{*/},
tabsize=4,
showspaces=false,
showstringspaces=false}

\tikzset{
    weight/.style = {
        scale=0.7,
        },
    prim node/.style = {
        fill = blue!50,
        text = white,
        },
    prim edge/.style = {
        draw=blue,
        very thick,
        },
    current/.style = {
        fill = teal!50,
        },
    visited/.style = {
        fill = teal!30,
        %text=white,
        opacity = 0.5,
    },
}

\forestset{%
empty node/.style = {
    dashed,
    opacity = .2, 
    fill opacity = 0.2,
    edge = {opacity=.2},
    },
r/.style = {
    fill = red!50,
    text=white,
    draw=red,
    calign angle=30,
    calign=fixed edge angles,
    %fill opacity = 0.5,
},
b/.style = {
    fill = black!50,
    text=white,
    draw=black,
    calign angle=30,
    calign=fixed edge angles,
    %fill opacity = 0.5,
},
rbn/.style = { %red black not defined
    fill = blue!50,
    text=white,
    draw=black,
    calign angle=30,
    calign=fixed edge angles,
    %fill opacity = 0.5,
},
nil/.style = {
    fill = black!50,
    minimum size=1em,
    calign angle=30,
    calign=fixed edge angles,
    %fill opacity = 0.5,
},
mpn/.style args = {#1/#2/#3/#4}{draw,
rectangle split, rectangle split horizontal,
rectangle split parts=4,
on chain=A,
draw=black!50,
node contents={ \nodepart{one}    $#1$
                \nodepart{two}    $#2$
                \nodepart{three}  $#3$
                \nodepart{four}   $#4$}
                            },
}

\newcommand\mpnc[4]{\nodepart{one}      $#1$
                    \nodepart{two}      $#2$                    
                    \nodepart{three}    $#3$
                    \nodepart{four}     $#4$
                    }

\addbibresource{algo.bib}

\title{Algorithmen}
\author{Patrick Gustav Blaneck}
\makeindex[intoc]
\makeindex[intoc, name=Beispiele,title=Beispiele]

\newenvironment{allintypewriter}{\ttfamily}{\par}

\newcommand{\BF}{\operatorname{BF}} 
\newcommand{\vektor}[1]{\begin{pmatrix*}[c] #1 \end{pmatrix*}}

\pgfmathsetmacro\twopi{2*pi}

\pgfmathdeclarefunction{lngamma}{1}{%
  \pgfmathsetmacro\lngammatmp{#1*#1*#1}%
  \pgfmathparse{%
    #1*ln(#1) - #1 - .5*ln(#1/\twopi)
    + 1/12/#1 - 1/360/\lngammatmp + 1/1260/\lngammatmp/#1/#1
  }%
}  

\pgfmathdeclarefunction{facreal}{1}{%
  \pgfmathparse{exp(lngamma(#1+1))}% 
}

\begin{document}
\maketitle
\tableofcontents
\newpage

\include{grundbegriffe.tex}

\include{datenstrukturen.tex}

\include{baeume.tex}

\include{graphen.tex}

\section{Formale Sprachen}
% Textsuche

% Regul채re Ausdr체cke

% PCRE

% Kleene

\section{Sortierverfahren}

\begin{defi}{Heapsort}
    Der Heap ist Grundlage f체r das Sortierverfahren \emph{Heapsort}.

    \begin{itemize}
        \item Zu Beginn: Unsortiertes Feld
        \item Phase 1:
              \begin{itemize}
                  \item Alle Elemente werden nacheinander in einen Heap eingef체gt
                  \item Resultat ist ein Heap, der in ein Feld eingebettet ist
              \end{itemize}
        \item Phase 2:
              \begin{itemize}
                  \item Die Elemente werden in absteigender Reihenfolge entfernt (Wurzel!)
                  \item Heap schrumpft immer weiter
              \end{itemize}
    \end{itemize}

    \begin{center}
        \begin{tikzpicture}
            [
                start chain,
                node distance = 0pt,
                HeapBlock/.style={draw, minimum width=2em, minimum height=2em, outer sep=0pt, on chain, fill=teal!30},
                SortedBlock/.style={draw, minimum width=2em, minimum height=2em, outer sep=0pt, on chain, fill=blue!30},
            ]

            { start chain = going right
                \node [HeapBlock, label=above:\texttt{root}] (1) {$0$};
                \node [HeapBlock] (2) {$1$};
                \node [HeapBlock] (3) {$2$};
                \node [HeapBlock] (dots) {$\ldots$};
                \node [HeapBlock] (n2) {$n-2$};
                \node [HeapBlock] (n1) {$n-1$};
                \node [HeapBlock] (n) {$n$};

                \draw[->, blue] ([yshift=1em] 1.north east) to[bend left=30] ([yshift=.5em] n.north);

                \draw [decorate,decoration={brace,amplitude=5pt,mirror,raise=.5em}]
                (1.south west) -- (n.south east) node[midway,yshift=-2em]{Heap};
                %\draw[->] (val.south) [out=-30, in=-150] to (4.south);
            }
        \end{tikzpicture}
        \hspace{4em}
        \begin{tikzpicture}
            [
                start chain,
                node distance = 0pt,
                HeapBlock/.style={draw, minimum width=2em, minimum height=2em, outer sep=0pt, on chain, fill=teal!30},
                SortedBlock/.style={draw, minimum width=2em, minimum height=2em, outer sep=0pt, on chain, fill=blue!30},
            ]

            { start chain = going right
                \node [HeapBlock, label=above:\texttt{root}] (1) {$0$};
                \node [HeapBlock] (2) {$1$};
                \node [HeapBlock] (3) {$2$};
                \node [HeapBlock] (dots) {$\ldots$};
                \node [HeapBlock] (n2) {$n-2$};
                \node [HeapBlock] (n1) {$n-1$};
                \node [SortedBlock] (n) {$n$};

                \draw[->, blue] ([yshift=1em] 1.north east) to[bend left=30] ([yshift=.5em] n1.north);

                \draw [decorate,decoration={brace,amplitude=5pt,mirror,raise=.5em}]
                (1.south west) -- (n1.south east) node[midway,yshift=-2em]{Heap};

                \draw [decorate,decoration={brace,amplitude=5pt,mirror,raise=.5em}]
                (n.south west) -- (n.south east) node[midway,yshift=-2em]{sortiertes Array};
                %\draw[->] (val.south) [out=-30, in=-150] to (4.south);
            }
        \end{tikzpicture}

        \begin{tikzpicture}
            [
                start chain,
                node distance = 0pt,
                HeapBlock/.style={draw, minimum width=2em, minimum height=2em, outer sep=0pt, on chain, fill=teal!30},
                SortedBlock/.style={draw, minimum width=2em, minimum height=2em, outer sep=0pt, on chain, fill=blue!30},
            ]

            { start chain = going right
                \node [HeapBlock, label=above:\texttt{root}] (1) {$0$};
                \node [HeapBlock] (2) {$1$};
                \node [HeapBlock] (3) {$2$};
                \node [HeapBlock] (dots) {$\ldots$};
                \node [HeapBlock] (n2) {$n-2$};
                \node [SortedBlock] (n1) {$n-1$};
                \node [SortedBlock] (n) {$n$};
                \node [xshift=2em, on chain] (dots2) {$\ldots$};

                \draw[->, blue] ([yshift=1em] 1.north east) to[bend left=30] ([yshift=.5em] n2.north);

                \draw [decorate,decoration={brace,amplitude=5pt,mirror,raise=.5em}]
                (1.south west) -- (n2.south east) node[midway,yshift=-2em]{Heap};

                \draw [decorate,decoration={brace,amplitude=5pt,mirror,raise=.5em}]
                (n1.south west) -- (n.south east) node[midway,yshift=-2em]{sortiertes Array};
                %\draw[->] (val.south) [out=-30, in=-150] to (4.south);
            }
        \end{tikzpicture}
        \hspace{1em}
        \begin{tikzpicture}
            [
                start chain,
                node distance = 0pt,
                HeapBlock/.style={draw, minimum width=2em, minimum height=2em, outer sep=0pt, on chain, fill=teal!30},
                SortedBlock/.style={draw, minimum width=2em, minimum height=2em, outer sep=0pt, on chain, fill=blue!30},
            ]

            { start chain = going right
                \node [SortedBlock] (1) {$0$};
                \node [SortedBlock] (2) {$1$};
                \node [SortedBlock] (3) {$2$};
                \node [SortedBlock] (dots) {$\ldots$};
                \node [SortedBlock] (n2) {$n-2$};
                \node [SortedBlock] (n1) {$n-1$};
                \node [SortedBlock] (n) {$n$};

                %\draw[->, blue] ([yshift=1em] 1.north) to[bend left=30] ([yshift=.5em] n2.north);

                %\draw [decorate,decoration={brace,amplitude=5pt,mirror,raise=.5em}]
                %(1.south west) -- (n2.south east) node[midway,yshift=-2em]{Heap};

                \draw [decorate,decoration={brace,amplitude=5pt,mirror,raise=.5em}]
                (1.south west) -- (n.south east) node[midway,yshift=-2em]{sortiertes Array};
                %\draw[->] (val.south) [out=-30, in=-150] to (4.south);
            }
        \end{tikzpicture}
    \end{center}
\end{defi}

\printindex
\printindex[Beispiele]

\printbibliography
\end{document}
